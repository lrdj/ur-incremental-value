{% extends "layouts/main.html" %}
{% block pageTitle %}Edit insight{% endblock %}
{% block content %}
<h1 class="govuk-heading-l">Edit insight</h1>

{% if error %}
  <div class="govuk-error-summary" data-module="govuk-error-summary">
    <div role="alert">
      <h2 class="govuk-error-summary__title">There is a problem</h2>
      <div class="govuk-error-summary__body">
        <p class="govuk-body">{{ error }}</p>
      </div>
    </div>
  </div>
{% endif %}

<form class="govuk-!-margin-bottom-6" method="post" action="/insights/{{ insight.id }}/edit">
  <div class="govuk-form-group">
    <label class="govuk-label" for="title">Title</label>
    <input class="govuk-input" id="title" name="title" type="text" required value="{{ insight.title }}">
  </div>

  <div class="govuk-form-group">
    <label class="govuk-label" for="description">Description</label>
    <textarea class="govuk-textarea" id="description" name="description" rows="3">{{ insight.description }}</textarea>
  </div>

  <div class="govuk-form-group">
    <label class="govuk-label" for="what_we_observed">What we observed</label>
    <textarea class="govuk-textarea" id="what_we_observed" name="what_we_observed" rows="3">{{ insight.what_we_observed }}</textarea>
  </div>

  <div class="govuk-form-group">
    <label class="govuk-label" for="why_it_matters">Why it matters</label>
    <textarea class="govuk-textarea" id="why_it_matters" name="why_it_matters">{{ insight.why_it_matters }}</textarea>
  </div>

  <div class="govuk-form-group">
    <label class="govuk-label" for="evidence">Evidence (semicolon-separated becomes bullet points)</label>
    <textarea class="govuk-textarea" id="evidence" name="evidence" rows="3">{{ insight.evidence }}</textarea>
  </div>

  <div class="govuk-form-group">
    <label class="govuk-label" for="source">Source</label>
    <input class="govuk-input" id="source" name="source" type="text" value="{{ insight.source }}">
  </div>

  <div class="govuk-form-group">
    <label class="govuk-label" for="date_discovered">Date discovered</label>
    <input class="govuk-input" id="date_discovered" name="date_discovered" type="date" required value="{{ insight.date_discovered }}">
  </div>

  <div class="govuk-form-group">
    <div class="govuk-checkboxes" data-module="govuk-checkboxes">
      <div class="govuk-checkboxes__item">
        <input class="govuk-checkboxes__input" id="contains_pii" name="contains_pii" type="checkbox" value="1" {% if insight.contains_pii %}checked{% endif %}>
        <label class="govuk-label govuk-checkboxes__label" for="contains_pii">Contains personal data (PII)</label>
      </div>
    </div>
  </div>

  <h2 class="govuk-heading-m">Optional narrative</h2>

  <div class="govuk-form-group">
    <label class="govuk-label" for="persona_story_title">User story title</label>
    <input class="govuk-input" id="persona_story_title" name="persona_story_title" type="text" value="{{ insight.persona_story_title }}" placeholder="e.g. Marco’s submission hiccup">
  </div>

  <div class="govuk-form-group">
    <label class="govuk-label" for="persona_story_body">User story</label>
    <textarea class="govuk-textarea" id="persona_story_body" name="persona_story_body" rows="3" placeholder="Short, human vignette explaining the situation">{{ insight.persona_story_body }}</textarea>
  </div>

  <div class="govuk-form-group">
    <label class="govuk-label" for="vox_pop_quote">Vox pop quote</label>
    <textarea class="govuk-textarea" id="vox_pop_quote" name="vox_pop_quote" rows="2" placeholder="Short, verbatim quote">{{ insight.vox_pop_quote }}</textarea>
  </div>

  <div class="govuk-form-group">
    <label class="govuk-label" for="vox_pop_attribution">Quote attribution</label>
    <input class="govuk-input" id="vox_pop_attribution" name="vox_pop_attribution" type="text" value="{{ insight.vox_pop_attribution }}" placeholder="e.g. Junior broker, interview">
  </div>

  <button class="govuk-button" data-module="govuk-button" type="submit">Save changes</button>
</form>

<p class="govuk-body">
  <a class="govuk-link" href="/insights/{{ insight.id }}">Back to insight</a> ·
  <a class="govuk-link" href="/insights">Back to insights</a>
</p>
{% endblock %}
